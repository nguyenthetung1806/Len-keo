<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>
      {% if username_url == username %}
      {{ account.name }}
      {% else %}
      {{ account_other.name }}
      {% endif %}
    </title>
  </head>
  <body>
    {% include 'include-template.html' %}



        <div class="container mt-3 ">
          <div class="row">

            <div class="text-light col-md-12 col-lg-4 pl-2 pr-2 d-block m-0">
              <!--One of two columns-->
              <div class="row">
                <div class="col-md-4 col-lg-2 pr-1 pl-1">
                  <div class="text-success text-center invisible">
                    <p class="m-0"  ><i class="fa fa-users" aria-hidden="true"></i></p>
                  </div>
                  <a data-toggle="tooltip" data-placement="top" title="Danh sách bạn bè" href="/friend.list/{{account_other.username}}"><div class="btn btn-dark d-flex align-items-center text-center mb-2">
                    <p class="m-0" data-toggle="tooltip" data-placement="top" title="Danh sách bạn bè" ><i class="fa fa-address-book-o" aria-hidden="true"></i></p>
                  </div></a>
                  <a  data-toggle="tooltip" data-placement="top" title="Danh sách Kèo bet" href="#"><div class="btn btn-dark d-flex align-items-center text-center mb-2">
                    <p class="m-0" ><i class="fa fa-list" aria-hidden="true"></i></p>
                  </div></a>
                  {% if account.username != account_other.username %}
                  <a  data-toggle="tooltip" data-placement="top" title="Thông tin cá nhân" href="/edit.profile/{{account_other.username}}"><div class="btn btn-dark d-flex align-items-center text-center mb-2">
                    <p class="m-0" ><i class="fa fa-eye" aria-hidden="true"></i></p>
                  </div></a>
                  {% endif %}
                </div>
                <!--image -->
                <div class="col-md-4 col-lg-8 bg-light p-2 border border-success rounded centered mx-auto d-block" >
                  {% if username_url == username %}
                  {% if account.image is none %}
                  <img class=" img-responsive card-img-top " src="https://www.frankfurt-airport.com/etc/clientlibs/fraport-airport/fraport.base.app/resources/img/fra_avatar.jpg" height="220px" alt="Ảnh đại diện">
                  {% else %}
                  <img class=" img-responsive card-img-top" src="data:image/*;base64,{{account.image}}" height="220px" alt="Ảnh đại diện">
                  {% endif %}
                  {% else %}
                  {% if account_other.image is none %}
                  <img class=" img-responsive card-img-top " src="https://www.frankfurt-airport.com/etc/clientlibs/fraport-airport/fraport.base.app/resources/img/fra_avatar.jpg" height="220px" alt="Ảnh đại diện">
                  {% else %}
                  <img class=" img-responsive card-img-top" src="data:image/*;base64,{{account_other.image}}" height="220px" alt="Ảnh đại diện">
                  {% endif %}
                  {% endif %}
                </div>
                <!--image end_ -->

                <div class="col-md-4 col-lg-2 ">
                </div>

              </div>
              <div class="col p-0 m-0 mt-2 mb-3 align-middle text-center mx-auto d-block">
                    <h2 class="text-dark font-weight-bold mb-3 ">
                      {% if username_url == username %}                  <!--add account here -->
                      {{ account.name }}
                      {% else %}
                      {{ account_other.name }}
                      {% endif %}
                    </h2>
              </div>

              <div class="col-md-5 col-lg-7 d-flex align-items-center mx-auto d-block mb-2">

                <form class="d-flex align-items-center mx-auto d-block btn-block" action="/contract.type.1/traditional" method="get">
                  <button class="btn btn-success btn-block font-weight-bold btn-lg" type="submit" name="">
                  <i class="fa fa-bookmark" aria-hidden="true"></i>
                  Lên kèo
                </button>
                </form>
              </div>
                <div class="col-md-5 col-lg-7 d-flex align-items-center mx-auto d-block mb-3 p-0">
                <!--button -->
                <div class="col p-0 m-0">
                    <!-- cơ chế kết bạn -->
                      {% if username_url == username %}
                      <form class="col-md col-6 d-flex align-items-center m-0 mx-auto d-block" action="/edit.profile/{{username_url}}" method="get">
                        <button class="btn btn-secondary btn-block " type="submit" name="button"><i class="fa fa-pencil-square-o" aria-hidden="true"></i>
                          Tùy chỉnh
                        </button>
                      {% else %}
                        {% if username_url in account.friendlist %}
                      <form class="col-md col-6 d-flex align-items-center m-0 mx-auto d-block" action="/friend.request/delete.friend/{{username_url}}" method="post">
                        <button class="btn btn-danger btn-block " type="submit" name="button"><i class="fa fa-pencil-square-o" aria-hidden="true"></i>
                          Hủy kết bạn
                        </button>
                        {% elif username_url in account.friend_request_sent %}
                      <form class="col-md col-6 d-flex align-items-center m-0 mx-auto d-block" action="/friend.request/cancel/{{username_url}}" method="post">
                        <button class="btn btn-danger btn-block " type="submit" name="button"><i class="fa fa-pencil-square-o" aria-hidden="true"></i>
                          Hủy lời mời
                        </button>
                        {% elif username_url in account.friend_accept_pending %}
                      <form class="col-md col-6 d-flex align-items-center m-0 mx-auto d-block" action="/friend.request/accept/{{username_url}}" method="post">
                        <button class="btn btn-success btn-block " type="submit" name="button"><i class="fa fa-pencil-square-o" aria-hidden="true"></i>
                          Chấp nhận
                        </button>
                        {% else %}
                      <form class="col-md col-6 d-flex align-items-center m-0 mx-auto d-block" action="/friend.request/send.request/{{username_url}}" method="post">
                        <button class="btn btn-success btn-block " type="submit" name="button"><i class="fa fa-pencil-square-o" aria-hidden="true"></i>
                          Kết bạn
                        </button>
                        {% endif %}
                      {% endif %}
                    </form>
                    <!-- cơ chế kết bạn end_ -->
                </div>
                <!--button end_ -->


              </div>
              <!--medal-->
              <div class="row rounded bg-light border border-success rounded m-1 mb-4 ">
                  <!--first medal-->

                <div class="col-md-6 col-lg-6 p-0 pt-1 pl-1" >

                  <div class="card m-2 bg-success">
                    <div class="card-body p-2 text-center">
                      <h5 class="card-title mb-2">Số lần thắng:</h5>
                      <div class="card-text text-center font-weight-bold " >
                        <h3 class="">
                          {{ account_other.win_bet|length }}
                        </h3>
                      </div>
                    </div>


                    <div class="card-footer text-right font-weight-bold pr-3 pb-3 p-2">
                      <a class=" text-white" href="">Xem chi tiết</a>
                    </div>
                  </div>

                  <!--first medal end_-->
                </div>



                <div class="col-md-6 col-lg-6 p-0 pt-1 pr-1">
                  <!--second medal-->
                  <div class="card m-2 bg-danger">
                    <div class="card-body p-2 text-center">
                      <h5 class="card-title mb-2">Số lần thua:</h5>
                      <div class="card-text text-center font-weight-bold" >
                        <div class="card-text text-center font-weight-bold " >
                          <h3 class="">
                            {{ account_other.lost_bet|length }}
                          </h3>
                        </div>
                      </div>
                    </div>



                    <div class="card-footer text-right font-weight-bold pr-3 pb-3 p-2">
                      <a class=" text-white" href="#">Xem chi tiết</a>
                    </div>
                  </div>

                  <!--second medal end_-->
                </div>

              <!--medal end_-->
              </div>

              <!--One of two columns end_-->
            </div>
            <div class="col-sm bg-light text-light col-md-12 col-lg-7 rounded-top pl-3 pr-3 border border-muted">
            <!--One of two columns-->
            <div class="font-weight-bold text-success m-0 m-3 text-right">
              <h3 class="Montserrat font-weight-bold font-size-lg">Active bet</h3>
            </div>




            <!-- 1 display bet -->
            {% if bets_to_show|length == 0 %}
            {% if username == username_url %}
            <div class="">
              <div class="card m-0 p-0 mb-4" >
                <div class="card-body text-dark p-2 pb-0 mb-0 text-center">
              Hiện tại bạn không có kèo nào đang hoạt động
                </div>
              </div>
            </div>
            {% else %}
            <div class="">
              <div class="card m-0 p-0 mb-4" >
                <div class="card-body text-dark p-2 pb-0 mb-0 text-center">
              Hiện tại người dùng này không có kèo nào đang hoạt động
                </div>
              </div>
            </div>
            {% endif %}
            {% else %}
            {% for bet in bets_to_show %}
            <div class="">
              <div class="card m-0 p-0 mb-4 border-success" >
                <div class="card-body text-dark p-2 pb-0 mb-0">
                  <h5 class="card-title text-secondary font-weight-bold m-0 mb-1 ml-3 "><span class="text-success">Còn: <span style="display:inline-block; width: YOURWIDTH;"></span></span>
                    <span class="text-dark " id="clock">
                      X ngày : X tiếng : X phút
                    </span><span style="display:inline-block; width: YOURWIDTH;"></span>trước khi <br> giao kèo hết hạn</h5>

                    <!-- danh sách người tham gia -->
                    {% if bet.party_multiplayers|length == 0 %}
                    <!-- bet traditional -->
                    <p class=" m-0 p-0 ml-3 ">
                      <span class="text-secondary">Cửa trên:</span>
                      {% for player_right in bet.party_right %}
                        {% for player_render in players_to_show %}
                          {% if player_render.username == player_right %}
                      <span>
                        <a href="/profile/{{ player_right }}">
                            {% if player_render.image is none %}
                          <img class=" rounded-circle" src="https://www.frankfurt-airport.com/etc/clientlibs/fraport-airport/fraport.base.app/resources/img/fra_avatar.jpg" height="20px" width="20px" alt="">
                            {% else %}
                          <img class=" rounded-circle" src="data:image/*;base64,{{player_render.image}}" height="20px" width="20px" alt="">
                            {% endif %}
                          {{ player_render.name }}
                        </a></span>
                          {% endif %}
                        {% endfor %}
                      {% endfor %}



                      <span class="text-secondary">Cửa dưới:</span>
                      {% for player_left in bet.party_left %}
                        {% for player_render in players_to_show %}
                          {% if player_render.username == player_left %}
                      <span>
                        <a href="/profile/{{ player_left }}">
                            {% if player_render.image is none %}
                          <img class=" rounded-circle" src="https://www.frankfurt-airport.com/etc/clientlibs/fraport-airport/fraport.base.app/resources/img/fra_avatar.jpg" height="20px" width="20px" alt="">
                            {% else %}
                          <img class=" rounded-circle" src="data:image/*;base64,{{player_render.image}}" height="20px" width="20px" alt="">
                            {% endif %}
                          {{ player_render.name }}
                        </a></span>
                          {% endif %}
                        {% endfor %}
                      {% endfor %}


                    </p>
                    <!-- bet traditional end_ -->
                    {% else %}
                    <!-- bet multipartry_ -->
                    <p class=" m-0 p-0 ml-3 ">
                      <span class="text-secondary">Các bên tham gia:</span>
                      {% for player_multiparty in bet.party_multiplayers %}
                        {% for player_render in players_to_show %}
                          {% if player_render.username == player_multiparty %}
                      <span>
                        <a href="/profile/{{ player_multiparty }}">
                            {% if player_render.image is none %}
                          <img class=" rounded-circle" src="https://www.frankfurt-airport.com/etc/clientlibs/fraport-airport/fraport.base.app/resources/img/fra_avatar.jpg" height="20px" width="20px" alt="">
                            {% else %}
                          <img class=" rounded-circle" src="data:image/*;base64,{{player_render.image}}" height="20px" width="20px" alt="">
                            {% endif %}
                          {{ player_render.name }}
                        </a></span>
                      <span>
                          {%  endif %}
                        {% endfor %}
                      {% endfor %}
                    </p>
                      <!-- bet multiparty end_ -->
                    {% endif %}


                    <!-- danh sách người tham gia end_ -->

                    <!-- danh sách pending -->

                    {% if bet.party_right_pending|length != 0 or bet.party_left_pending|length != 0 or bet.party_multiplayers_pending|length != 0 %}
                    <p class=" m-0 p-0 ml-3 ">
                    <span class="text-secondary">Chờ xác nhận: </span>
                    {% for player_right in bet.party_right_pending or bet.party_left_pending or bet.party_multiplayers_pending %}
                      {% for player_render in players_to_show %}
                        {% if player_render.username == player_right %}
                    <span>
                      <a href="/profile/{{ player_right }}">
                          {% if player_render.image is none %}
                        <img class=" rounded-circle" src="https://www.frankfurt-airport.com/etc/clientlibs/fraport-airport/fraport.base.app/resources/img/fra_avatar.jpg" height="20px" width="20px" alt="">
                          {% else %}
                        <img class=" rounded-circle" src="data:image/*;base64,{{player_render.image}}" height="20px" width="20px" alt="">
                          {% endif %}
                        {{ player_render.name }}
                      </a></span>
                    <span>
                        {% endif %}
                      {% endfor %}
                    {% endfor %}
                    </p>
                    {% endif %}

                    <!-- danh sách pending end_ -->


                </div>
                <div class="card-body border border-secondary border-right-0 border-left-0 mr-4 ml-4 mb-1 p-0 pt-1 pb-1">

                  <p class="card-text text-dark mb-0">
                    {{  bet.contract_term }}
                  </p>
                  <p class="card-text text-dark mb-0">
                    <span class="font-weight-bold text-danger"> Hình phạt cho bên thua: </span>
                    <span>
                      {{  bet.punishment }}
                     </span>
                  </p>
                </div>
                <div class="card-body text-left m-0 p-0 pl-4 pb-2">
                  <a class="text-right text-secondary" href="/active.bet/{{bet.id}}"><i class="fa fa-info" aria-hidden="true"></i> Xem chi tiết </a>
                  <span style="display:inline-block; width: YOURWIDTH;"></span>
                  <span style="display:inline-block; width: YOURWIDTH;"></span>
                  <!-- claim_victory -->
                  {% if username in bet.party_left or username in bet.party_right or username in bet.party_multiplayers %}
                  {% if bet.party_multiplayers|length == 0 %}
                  {% if bet.party_left_pending|length * 2 <= bet.party_left|length and
                        bet.party_right_pending|length * 2 <= bet.party_right|length %}
                        {% if bet.victory_claim|length == 0 %}
                    <span data-toggle="tooltip" data-placement="top" title="Tuyên bố với những người chơi khác là bạn đã thắng cuộc">
                      <a class="text-success" href="/claim.victory/{{account.username}}/{{bet.id}}">
                        <i  class="fa fa-trophy" aria-hidden="true">
                    </i> Thắng cược </a></span>
                        {% else %}
                    <span class="text-info" data-toggle="tooltip" data-placement="top" title="Một người nào đó đã tuyên bố chiến thắng và đang đợi xác nhận">
                      <i class="fa fa-exclamation-circle" aria-hidden="true">
                      </i> Đang xác nhận </a></span>
                        {% endif %}
                  {% else %}
                    <span data-toggle="tooltip" data-placement="top" title="Đang chờ những người chơi khác nhận lời mời tham gia kèo" class="text-info">
                      <i class="fa fa-question-circle-o" aria-hidden="true"></i></i> Chờ nhận lời </a></span>
                  {% endif %}
                  {% else %}
                  {% if bet.party_multiplayers_pending|length <= bet.party_multiplayers|length %}
                        {% if bet.victory_claim|length == 0 %}
                  <span data-toggle="tooltip" data-placement="top" title="Tuyên bố với những người chơi khác là bạn đã thắng cuộc">
                    <a class="text-success" href="/claim.victory/{{account.username}}/{{bet.id}}">
                      <i  class="fa fa-trophy" aria-hidden="true">
                  </i> Thắng cược ( {{ bet.winner|length }} / {{ bet.number_of_winner }} )</a></span>
                        {% else %}
                    <span class="text-info" data-toggle="tooltip" data-placement="top" title="Một người nào đó đã tuyên bố chiến thắng và đang đợi xác nhận">
                      <i class="fa fa-exclamation-circle" aria-hidden="true">
                      </i> Đang xác nhận </a></span>
                        {% endif %}
                  {% else %}
                    <span data-toggle="tooltip" data-placement="top" title="Đang chờ những người chơi khác nhận lời mời tham gia kèo" class="text-info">
                      <i class="fa fa-question-circle-o" aria-hidden="true"></i></i> Chờ nhận lời </a></span>
                  {% endif %}


                  {% endif %}
                  {% endif %}


                </div>


                <div class="card-footer text-right  p-0 pr-1 pt-1">
                  <!-- bình luận -->
                  <div class="col-12 font-weight-bold text-right text-secondary pr-4"><i class="fa fa-comments-o" aria-hidden="true"></i> Bình luận</div>

                  <div class="border border-muted rounded mr-3 ml-4 mb-1 pb-1 pt-2 bg-white text-dark">
                        {% for player_comment in bet.comments %}
                          {% for player_render in players_to_show %}
                            {% if player_render.username == player_comment['username'] %}
                      <div class="row m-0 p-0 pl-2 pr-1">
                        <div class="col-1 p-0 mt-1">
                          <a  href="/profile/{{ player_left }}">
                              {% if player_render.image is none %}
                            <img class=" rounded-circle border-success" src="https://www.frankfurt-airport.com/etc/clientlibs/fraport-airport/fraport.base.app/resources/img/fra_avatar.jpg" height="40px" width="40px" alt="">
                              {% else %}
                            <img class=" rounded-circle border-success" src="data:image/*;base64,{{player_render.image}}" height="40px" width="40px" alt="">
                              {% endif %}
                          </a>
                      </div>
                      <div class="col-11 pl-3">
                        <div class="text-left rounded border bg-light border-success m-0 mb-1 pl-3 pr-3">
                          <a class="font-weight-bold text-dark" href="/profile/{{ player_left }}"> {{ player_render.name }} </a>
                          <p class="p-0 m-0">{{ player_comment['comment'] }}</p>
                        </div>
                      </div>
                    </div>
                          {% endif %}
                        {% endfor %}
                      {% endfor %}
                  </div>
                    <form class="" action="/comment/{{bet.id}}" method="post">
                      <div class="bg-white ml-4 mr-3 mb-2">
                        <textarea name="comment"class="form-control" rows="2" required placeholder="Nhập bình luận .."></textarea>

                          <input href ="/comment/{{bet.id}}" class="mt-1 mb-1 btn btn-sm btn-success float-right" type="submit" name="" value="Bình luận">
                    </form>
                  </div>
                  <!-- bình luận end_ -->

              </div>
            </div>
            <br>
            {% endfor %}
            {% endif%}
            <!-- 1 display bet end_-->





            <!--One of two columns end_-->

            </div>
          </div>
        </div>



  </body>
</html>
